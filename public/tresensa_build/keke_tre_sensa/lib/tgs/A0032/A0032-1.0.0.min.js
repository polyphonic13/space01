/* Copyright (c) 2013 TreSensa, Inc. All Rights Reserved. */

TGS.Adapters.A0032=function(){TGS.Adapters.A0032.superclass.constructor.call(this);this._mLoggedIn=false;TGS.DataStore._sSaveToLocalStorage=true;TGS.DataStore._sSaveToTGSServer=false;TGS._sContinueOnPartnerInfoFail=true};TGS.Adapters.A0032.prototype={supportsPersistentUser:function(){return true},supportsMicrotransactions:function(){return true},autoLogin:function(){return false},costFactor:function(){return 10},priceAsFormattedString:function(a){return"$"+((a*this.costFactor()/100)-0.01).toFixed(2)},currencyIcon:function(){return TGS._IMAGES_LOCATION+"testicon.png"},gameWasLaunched:function(){if(typeof(window.TGE)!=="undefined"&&TGE.Game.GetInstance()){TGE.Button.DefaultVerticalPressOffset=3}},connect:function(a){this.getLoginStatus()},loginUser:function(a){TGS.Debug.Log(TGS.Debug.LOG_INFO,"prompting user to login...");var b=window.prompt("LOGIN (enter your username):","");if(!b){TGS._LoginCanceled(a);return}else{if(typeof(b)!=="string"||b.length<1){TGS._LoginFailed(a);return}}this._mUsername=b;this.userLoggedIn(a,b)},purchaseItem:function(a){a.partnerTransactionID=~~(Math.random()*2147483648);setTimeout(this.openPurchase.bind(this,a),2000)},openPurchase:function(b){var a="Do you agree to pay "+this.priceAsFormattedString(b.item.price)+" to buy "+b.item.title+"?";var c=confirm(a);setTimeout(this.closePurchase.bind(this,c,b),1000)},closePurchase:function(b,a){if(b){TGS.Debug.Log(TGS.Debug.LOG_INFO,"TizenAdapter approved purchase of transaction "+a.transactionID);TGS.Microtransactions._PartnerPurchaseSuccessful(a)}else{a.internalErrorMessage="user cancelled";a.userErrorMessage="";TGS.Microtransactions._PartnerPurchaseFailed(a)}}};extend(TGS.Adapters.A0032,TGS.PartnerBridge);